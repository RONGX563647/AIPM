# 数据同步系统表结构设计

## 1. 同步记录表（sync_record）

| 表名 | sync_record（同步记录表） |
| ----------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 同步记录唯一标识 | 主键（自增） | - |
| source | varchar(20) | 数据源 | 普通索引 | 枚举：github/gitee |
| repo_name | varchar(100) | 仓库名称 | 无 | 如：username/repo-name |
| sync_time | datetime | 同步时间 | 普通索引 | 默认CURRENT_TIMESTAMP |
| sync_status | varchar(20) | 同步状态 | 无 | 枚举：success/failed/pending |
| error_message | text | 错误信息 | 无 | 可为空 |
| data_count | int(11) | 同步数据数量 | 无 | 本次同步获取的数据条数 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. GitHub仓库表（github_repo）

| 表名 | github_repo（GitHub仓库表） |
| ----------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 仓库唯一标识 | 主键（自增） | - |
| repo_id | bigint(20) | GitHub仓库ID | 唯一索引 | GitHub API返回的仓库ID |
| repo_name | varchar(100) | 仓库名称 | 普通索引 | 格式：owner/repo |
| repo_url | varchar(255) | 仓库地址 | 无 | GitHub仓库完整URL |
| description | varchar(500) | 仓库描述 | 无 | 可为空 |
| language | varchar(50) | 主要语言 | 无 | 可为空 |
| stars_count | int(11) | 星标数 | 无 | 默认0 |
| forks_count | int(11) | 分支数 | 无 | 默认0 |
| open_issues_count | int(11) | 开放问题数 | 无 | 默认0 |
| updated_at | datetime | 更新时间 | 无 | GitHub仓库最后更新时间 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |
| update_time | datetime | 更新时间 | 无 | 默认CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

## 3. Gitee仓库表（gitee_repo）

| 表名 | gitee_repo（Gitee仓库表） |
| ----------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 仓库唯一标识 | 主键（自增） | - |
| repo_id | bigint(20) | Gitee仓库ID | 唯一索引 | Gitee API返回的仓库ID |
| repo_name | varchar(100) | 仓库名称 | 普通索引 | 格式：owner/repo |
| repo_url | varchar(255) | 仓库地址 | 无 | Gitee仓库完整URL |
| description | varchar(500) | 仓库描述 | 无 | 可为空 |
| language | varchar(50) | 主要语言 | 无 | 可为空 |
| stars_count | int(11) | 星标数 | 无 | 默认0 |
| forks_count | int(11) | 分支数 | 无 | 默认0 |
| open_issues_count | int(11) | 开放问题数 | 无 | 默认0 |
| updated_at | datetime | 更新时间 | 无 | Gitee仓库最后更新时间 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |
| update_time | datetime | 更新时间 | 无 | 默认CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

## 4. 同步配置表（sync_config）

| 表名 | sync_config（同步配置表） |
| ----------- | ---------------------- | ------------ | ------------ | ------------------------ |
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 配置唯一标识 | 主键（自增） | - |
| source | varchar(20) | 数据源 | 唯一索引 | 枚举：github/gitee |
| access_token | varchar(255) | 访问令牌 | 无 | API访问令牌，加密存储 |
| sync_interval | int(11) | 同步间隔（分钟） | 无 | 默认60（每小时） |
| is_enabled | tinyint(1) | 是否启用 | 无 | 默认1（启用） |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |
| update_time | datetime | 更新时间 | 无 | 默认CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |
