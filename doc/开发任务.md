### 核心前置规范（必须遵守）
1. **表结构设计规范**（非SQL语句，统一范式）：
   - 主键：`id`，类型`bigint(20)`，自增，唯一标识；
   - 时间字段：`create_time`/`update_time`，类型`datetime`，默认`CURRENT_TIMESTAMP`，分别记录创建/更新时间；
   - 关联字段：格式为「关联表名_id」（如`project_id`关联`project`表），类型`bigint(20)`，加普通索引；
   - 状态字段：类型`varchar(20)`，枚举值明确（如`status`：developing/online/stop）；
   - 字符串字段：按内容长度定义（如`username`：varchar(50)，`description`：varchar(500)）；
   - 索引：唯一字段加唯一索引，高频查询字段加普通索引。
2. **闭环开发通用步骤**（每个模块必走）：
   步骤1 → 表结构设计（精准字段/类型/索引）；
   步骤2 → 后端开发（按子任务拆解落地）；
   步骤3 → Swagger接口验证（仅验证可用性）；
   步骤4 → 前端开发（按子任务拆解落地）；
   步骤5 → 联调验证（问题即时修复，提交Git）。

---

# 模块1：用户登录（sys_user）—— 第一个必做模块
## 1. 表结构设计（非SQL）
| 表名 | sys_user（系统用户表） |
|------|------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 用户唯一标识 | 主键（自增） | - |
| username | varchar(50) | 登录用户名 | 唯一索引 | 不可为空，唯一 |
| password | varchar(100) | 加密密码 | 无 | 存储BCrypt加密后的字符串 |
| nickname | varchar(50) | 用户昵称 | 无 | 可为空，默认空字符串 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 1.1 | 表结构设计确认 | 明确sys_user表的字段、类型、索引 | 字段无遗漏，类型匹配业务场景 |
| 1.2.1 | 后端：创建SysUser实体类 | 映射sys_user表字段，加Swagger注解 | 字段与表设计完全一致 |
| 1.2.2 | 后端：实现Mapper层（BaseMapper） | 继承MyBatis-Plus BaseMapper | 支持基础CRUD |
| 1.2.3 | 后端：实现Service层（登录逻辑） | 校验用户名密码，生成JWT Token | 密码验证用BCrypt，Token生成正确 |
| 1.2.4 | 后端：实现Controller层（登录接口） | 暴露POST登录接口，返回统一Result | 接口路径：/sys/user/login，参数正确 |
| 1.2.5 | 后端：配置JWT工具类+密码编码器 | 配置密钥、过期时间，BCrypt加密 | Token可解析，密码加密/验证正常 |
| 1.3 | Swagger接口验证 | 测试登录接口入参/出参 | 输入admin/123456返回有效Token |
| 1.4.1 | 前端：封装登录API（axios） | 调用后端/login接口，处理响应 | API返回结果与后端一致 |
| 1.4.2 | 前端：开发登录页面（表单+校验） | 用户名/密码表单，必填校验 | 表单校验规则生效 |
| 1.4.3 | 前端：实现Token存储+路由守卫 | Token存localStorage，拦截未登录访问 | 未登录无法进入首页 |
| 1.5.1 | 联调：环境检查 | 前端代理指向后端，端口无冲突 | 前端/api转发到后端8080 |
| 1.5.2 | 联调：功能测试 | 输入正确/错误账号密码，验证结果 | 正确账号登录成功，错误提示准确 |
| 1.5.3 | 联调：问题修复 | 修复接口调用/Token解析问题 | 无跨域/参数不匹配问题 |
| 1.5.4 | 联调：提交Git | 后端+前端代码提交，标注模块1完成 | 代码提交记录清晰 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发sys_user用户登录模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.sys；
2. 实体类SysUser映射表结构：id(bigint)、username(varchar50)、password(varchar100)、nickname(varchar50)、create_time(datetime)；
3. 实现登录接口：POST /sys/user/login，入参username/password（@RequestParam），返回统一Result格式（code/msg/data），data为JWT Token；
4. 密码加密：使用BCryptPasswordEncoder，禁止明文存储；
5. JWT配置：密钥ai-code-review-secret-key-2024，过期时间86400000毫秒，生成/解析Token工具类；
6. 全接口添加Swagger3（SpringDoc）注解，无需生成SQL语句；
7. 仅生成Entity→Mapper→Service→Controller→JWT工具类→密码编码器配置，无多余代码。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发登录模块，严格遵循以下要求：
1. 页面路径：src/views/login/index.vue；
2. 核心功能：
   - 登录表单：用户名（必填）、密码（必填）输入框，表单校验；
   - 接口调用：POST /api/sys/user/login，成功后将Token存入localStorage，跳转首页；
   - 路由守卫：拦截需登录的页面（如/home），未登录跳转/login；
   - 退出登录：清除Token，返回登录页；
3. 封装axios请求拦截器：添加Token到请求头（Authorization: Bearer {token}）；
4. Vite代理配置：/api转发到http://localhost:8080，无多余配置；
5. 仅生成登录页面+请求拦截器+路由守卫，无多余页面/代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认sys_user表结构设计无遗漏；
2. 复制后端提示词到Vibecoding，生成后端代码并启动；
3. 访问Swagger（http://localhost:8080/swagger-ui.html）测试登录接口；
4. 复制前端提示词到Vibecoding，生成前端代码并启动；
5. 前端输入admin/123456登录，验证跳转/退出功能；
6. 修复联调问题，提交Git，模块1闭环完成。

---

# 模块2：项目管理（project）—— 模块1闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | project（项目表） |
|------|------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 项目唯一标识 | 主键（自增） | - |
| name | varchar(100) | 项目名称 | 唯一索引 | 不可为空 |
| description | varchar(500) | 项目描述 | 无 | 可为空 |
| git_url | varchar(255) | Git仓库地址 | 普通索引 | 可为空 |
| tech_stack | varchar(100) | 技术栈（逗号分隔） | 无 | 如：SpringBoot3,Vue3,MySQL |
| status | varchar(20) | 项目状态 | 普通索引 | 枚举：developing（开发中）/testing（测试中）/online（已上线）/stop（停滞） |
| online_url | varchar(255) | 线上访问地址 | 无 | 可为空 |
| doc_url | varchar(255) | 文档地址 | 无 | 可为空 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 2.1 | 表结构设计确认 | 明确project表的字段、类型、索引 | 字段覆盖项目基础信息，索引合理 |
| 2.2.1 | 后端：创建Project实体类 | 映射project表字段，加Swagger注解 | 字段与表设计完全一致 |
| 2.2.2 | 后端：实现Mapper层 | 继承BaseMapper，支持分页/条件查询 | 可按name/status/git_url查询 |
| 2.2.3 | 后端：实现Service层 | 封装CRUD、分页查询、条件查询逻辑 | 分页参数（pageNum/pageSize）生效 |
| 2.2.4 | 后端：实现Controller层 | 暴露CRUD/分页/条件查询接口 | 接口路径：/project，返回统一Result |
| 2.3 | Swagger接口验证 | 测试所有接口的入参/出参/分页 | 分页查询返回正确条数，条件查询精准 |
| 2.4.1 | 前端：封装project API | 封装CRUD/分页/条件查询接口 | API参数与后端一致 |
| 2.4.2 | 前端：开发项目列表页面 | 表格展示，支持条件查询（名称/状态）、分页 | 表格列与表字段匹配，查询生效 |
| 2.4.3 | 前端：开发新增/编辑/删除弹窗 | 表单字段与表设计一致，必填校验 | 新增后列表刷新，删除有确认提示 |
| 2.5.1 | 联调：环境检查 | 前端API调用路径正确，Token携带正常 | 无401/403错误 |
| 2.5.2 | 联调：功能测试 | 新增/编辑/删除/分页/查询功能验证 | 所有操作同步到数据库，无数据丢失 |
| 2.5.3 | 联调：问题修复 | 修复分页/条件查询/表单校验问题 | 功能无异常，交互流畅 |
| 2.5.4 | 联调：提交Git | 标注模块2完成，代码提交 | 提交记录包含后端+前端变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发project项目管理模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.project；
2. 实体类Project映射表结构：id(bigint)、name(varchar100)、description(varchar500)、git_url(varchar255)、tech_stack(varchar100)、status(varchar20)、online_url(varchar255)、doc_url(varchar255)、create_time(datetime)；
3. 实现核心接口：
   - 新增：POST /project/add；
   - 修改：PUT /project/update；
   - 删除：DELETE /project/delete/{id}；
   - 分页查询：GET /project/page（入参：pageNum/pageSize/name/status）；
   - 单查：GET /project/{id}；
4. 所有接口返回统一Result格式，添加Swagger3注解；
5. 仅生成Entity→Mapper→Service→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发project项目管理页面，严格遵循以下要求：
1. 页面路径：src/views/project/index.vue；
2. 核心功能：
   - 列表：Element Plus表格，列包含name/description/tech_stack/status/online_url/create_time，支持分页（pageNum/pageSize）；
   - 查询：表单包含name（模糊）、status（下拉，枚举值：developing/testing/online/stop），查询按钮触发；
   - 操作：新增/编辑（弹窗表单）、删除（确认提示），表单字段与表结构一致；
3. 接口调用：封装/api/project下的CRUD/分页接口，携带Token；
4. 仅生成项目列表页面+新增/编辑/删除弹窗，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认project表结构设计无遗漏；
2. 复制后端提示词生成代码，启动后端并通过Swagger验证接口；
3. 复制前端提示词生成代码，启动前端；
4. 测试新增/编辑/删除/分页/查询功能，修复联调问题；
5. 提交Git，模块2闭环完成。

---

# 模块3：任务&进度管理（task）—— 模块2闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | task（任务表） |
|------|----------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 任务唯一标识 | 主键（自增） | - |
| project_id | bigint(20) | 关联项目ID | 普通索引 | 关联project表id，不可为空 |
| title | varchar(100) | 任务标题 | 无 | 不可为空 |
| content | varchar(1000) | 任务内容 | 无 | 可为空 |
| status | varchar(20) | 任务状态 | 普通索引 | 枚举：todo（待办）/doing（进行中）/done（已完成） |
| priority | varchar(20) | 优先级 | 无 | 枚举：high（高）/medium（中）/low（低） |
| progress | int(3) | 进度百分比 | 无 | 0-100，默认0 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 3.1 | 表结构设计确认 | 明确task表的字段、关联关系、枚举值 | project_id关联正确，进度范围0-100 |
| 3.2.1 | 后端：创建Task实体类 | 映射task表字段，关联project_id | 字段与表设计完全一致 |
| 3.2.2 | 后端：实现Mapper层 | 支持分页/按project_id查询/统计进度 | 可按project_id统计各状态任务数 |
| 3.2.3 | 后端：实现Service层 | 封装CRUD、分页、按项目统计进度逻辑 | 统计接口返回项目进度百分比（已完成数/总数） |
| 3.2.4 | 后端：实现Controller层 | 暴露CRUD/分页/进度统计接口 | 进度统计接口：/task/progress/{project_id} |
| 3.3 | Swagger接口验证 | 测试所有接口，重点验证进度统计 | 进度统计结果与实际任务数匹配 |
| 3.4.1 | 前端：封装task API | 封装CRUD/分页/进度统计接口 | API参数与后端一致 |
| 3.4.2 | 前端：开发任务列表页面 | 关联当前项目，展示该项目下所有任务 | 切换项目后任务列表刷新 |
| 3.4.3 | 前端：开发任务操作组件 | 状态切换下拉、进度条编辑、优先级标签 | 进度条修改后同步到后端 |
| 3.4.4 | 前端：展示项目进度统计 | 页面顶部显示项目整体进度百分比 | 进度数值与后端统计结果一致 |
| 3.5.1 | 联调：环境检查 | 前端关联project_id正确，Token正常 | 无接口404/参数错误 |
| 3.5.2 | 联调：功能测试 | 任务CRUD、状态切换、进度修改、进度统计 | 所有操作生效，统计数值实时更新 |
| 3.5.3 | 联调：问题修复 | 修复进度统计/状态切换/关联项目问题 | 功能无异常，交互流畅 |
| 3.5.4 | 联调：提交Git | 标注模块3完成，代码提交 | 提交记录包含任务模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发task任务&进度管理模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.task；
2. 实体类Task映射表结构：id(bigint)、project_id(bigint)、title(varchar100)、content(varchar1000)、status(varchar20)、priority(varchar20)、progress(int3)、create_time(datetime)；
3. 实现核心接口：
   - CRUD：POST/PUT/DELETE /task；
   - 分页查询：GET /task/page（入参：pageNum/pageSize/project_id/status）；
   - 进度统计：GET /task/progress/{project_id}（返回该项目进度百分比）；
4. 进度统计逻辑：已完成任务数（status=done）/总任务数 * 100；
5. 所有接口返回统一Result格式，添加Swagger3注解；
6. 仅生成Entity→Mapper→Service→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发task任务&进度管理页面，严格遵循以下要求：
1. 页面路径：src/views/task/index.vue；
2. 核心功能：
   - 关联项目：通过project_id筛选任务，仅展示当前项目下的任务；
   - 任务列表：表格列包含title/content/status/priority/progress/create_time，进度用进度条展示；
   - 操作：状态下拉切换（todo/doing/done）、进度条编辑（0-100）、新增/编辑/删除任务；
   - 进度统计：页面顶部显示当前项目的进度百分比（调用/task/progress/{project_id}）；
3. 接口调用：封装/api/task下的所有接口，携带Token；
4. 仅生成任务列表页面+进度统计组件，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认task表结构设计，重点核对project_id关联关系；
2. 复制后端提示词生成代码，启动后端并验证进度统计接口；
3. 复制前端提示词生成代码，关联已完成的项目模块；
4. 测试任务CRUD、进度统计、状态切换功能；
5. 修复联调问题，提交Git，模块3闭环完成。

---

# 模块4：智能接口中心（api_info）—— 模块3闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | api_info（接口信息表） |
|------|------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 接口唯一标识 | 主键（自增） | - |
| project_id | bigint(20) | 关联项目ID | 普通索引 | 关联project表id，不可为空 |
| path | varchar(255) | 接口路径 | 普通索引 | 如：/sys/user/login，不可为空 |
| method | varchar(10) | 请求方法 | 无 | 枚举：GET/POST/PUT/DELETE，不可为空 |
| params | text | 请求参数（JSON格式） | 无 | 包含参数名/类型/是否必填 |
| header | text | 请求头（JSON格式） | 无 | 如：Authorization/Content-Type |
| response | text | 响应结果（JSON格式） | 无 | 包含响应码/数据结构 |
| remark | varchar(500) | 接口备注 | 无 | 可为空 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 4.1 | 表结构设计确认 | 明确api_info表的字段、JSON字段格式 | params/header/response为JSON格式 |
| 4.2.1 | 后端：创建ApiInfo实体类 | 映射api_info表字段，JSON字段用String接收 | 字段与表设计完全一致 |
| 4.2.2 | 后端：实现Mapper层 | 支持分页/按project_id/path/method查询 | 可精准筛选指定项目的接口 |
| 4.2.3 | 后端：实现Service层 | 封装CRUD、分页、在线调试逻辑 | 在线调试可调用目标接口并返回结果 |
| 4.2.4 | 后端：实现Controller层 | 暴露CRUD/分页/在线调试接口 | 调试接口：/api/debug，返回目标接口结果 |
| 4.3 | Swagger接口验证 | 测试CRUD+在线调试接口 | 调试接口能正确调用目标接口，返回结果 |
| 4.4.1 | 前端：封装api_info API | 封装CRUD/分页/在线调试接口 | API参数与后端一致 |
| 4.4.2 | 前端：开发接口列表页面 | 关联项目，展示接口路径/方法/备注，支持查询 | 列表与表字段匹配，查询生效 |
| 4.4.3 | 前端：开发接口编辑/调试弹窗 | 表单编辑JSON参数，调试区展示请求/响应 | 调试结果与后端返回一致 |
| 4.5.1 | 联调：环境检查 | 调试接口跨域/权限配置正确 | 无403/跨域错误 |
| 4.5.2 | 联调：功能测试 | 接口CRUD、在线调试功能验证 | 调试接口能正确调用目标接口，返回结果 |
| 4.5.3 | 联调：问题修复 | 修复JSON参数解析/调试结果展示问题 | 调试功能正常，JSON格式正确 |
| 4.5.4 | 联调：提交Git | 标注模块4完成，代码提交 | 提交记录包含接口模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发api_info智能接口中心模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.api；
2. 实体类ApiInfo映射表结构：id(bigint)、project_id(bigint)、path(varchar255)、method(varchar10)、params(text)、header(text)、response(text)、remark(varchar500)、create_time(datetime)；
3. 实现核心接口：
   - CRUD：POST/PUT/DELETE /api/info；
   - 分页查询：GET /api/info/page（入参：pageNum/pageSize/project_id/path/method）；
   - 在线调试：POST /api/info/debug（入参：path/method/params/header，返回目标接口结果）；
4. params/header/response字段存储JSON格式字符串，接口返回统一Result格式；
5. 添加Swagger3注解，仅生成Entity→Mapper→Service→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发api_info智能接口中心页面，严格遵循以下要求：
1. 页面路径：src/views/api/index.vue；
2. 核心功能：
   - 关联项目：通过project_id筛选接口，仅展示当前项目下的接口；
   - 接口列表：表格列包含path/method/remark/create_time，支持按path/method查询；
   - 接口编辑：弹窗表单，params/header/response用JSON编辑器编辑；
   - 在线调试：弹窗包含请求路径/方法/参数/请求头输入框，发送后展示响应结果；
3. 接口调用：封装/api/info下的所有接口，携带Token；
4. 仅生成接口列表页面+编辑/调试弹窗，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认api_info表结构，重点核对JSON字段设计；
2. 复制后端提示词生成代码，验证在线调试接口；
3. 复制前端提示词生成代码，关联项目模块；
4. 测试接口CRUD、在线调试功能；
5. 修复联调问题，提交Git，模块4闭环完成。

---

# 模块5：AI代码评审（code_ai_review）—— 模块4闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | code_ai_review（AI代码评审表） |
|------|--------------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 评审记录唯一标识 | 主键（自增） | - |
| project_id | bigint(20) | 关联项目ID | 普通索引 | 关联project表id，不可为空 |
| code_content | text | 待评审代码内容 | 无 | 不可为空 |
| score | int(3) | 评审分数 | 无 | 0-100，默认0 |
| suggestion | text | 优化建议 | 无 | 可为空 |
| improved_code | text | 优化后的代码 | 无 | 可为空 |
| create_time | datetime | 评审时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 5.1 | 表结构设计确认 | 明确code_ai_review表的字段、分数范围 | score范围0-100，code_content非空 |
| 5.2.1 | 后端：创建CodeAiReview实体类 | 映射表字段，加Swagger注解 | 字段与表设计完全一致 |
| 5.2.2 | 后端：实现Mapper层 | 支持按project_id查询评审记录 | 可筛选指定项目的评审记录 |
| 5.2.3 | 后端：实现Service层 | 封装CRUD、提交评审逻辑（AI调用预留） | 接收code_content，返回score/suggestion/improved_code |
| 5.2.4 | 后端：实现Controller层 | 暴露提交评审/查询评审记录接口 | 提交接口：POST /ai/review，返回评审结果 |
| 5.3 | Swagger接口验证 | 测试提交评审/查询记录接口 | 提交代码后返回模拟分数/建议（AI逻辑预留） |
| 5.4.1 | 前端：封装ai review API | 封装提交评审/查询记录接口 | API参数与后端一致 |
| 5.4.2 | 前端：开发代码评审页面 | 代码编辑器（支持语法高亮），提交按钮 | 代码编辑器可输入多行代码 |
| 5.4.3 | 前端：展示评审结果 | 展示分数、优化建议、优化后代码（支持复制） | 结果展示区与后端返回字段匹配 |
| 5.5.1 | 联调：环境检查 | 前端代码提交格式正确，Token正常 | 无接口400/401错误 |
| 5.5.2 | 联调：功能测试 | 提交代码、展示评审结果、查询历史记录 | 提交后返回模拟结果，历史记录可查询 |
| 5.5.3 | 联调：问题修复 | 修复代码编辑器/结果展示/复制功能问题 | 功能无异常，交互流畅 |
| 5.5.4 | 联调：提交Git | 标注模块5完成，代码提交 | 提交记录包含AI评审模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发code_ai_review AI代码评审模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.ai；
2. 实体类CodeAiReview映射表结构：id(bigint)、project_id(bigint)、code_content(text)、score(int3)、suggestion(text)、improved_code(text)、create_time(datetime)；
3. 实现核心接口：
   - 提交评审：POST /ai/review（入参：project_id/code_content，返回score/suggestion/improved_code）；
   - 查询记录：GET /ai/review/page（入参：pageNum/pageSize/project_id）；
4. AI调用逻辑预留：返回模拟分数（80-95）、通用优化建议、模拟优化代码；
5. 所有接口返回统一Result格式，添加Swagger3注解；
6. 仅生成Entity→Mapper→Service→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发code_ai_review AI代码评审页面，严格遵循以下要求：
1. 页面路径：src/views/ai-review/index.vue；
2. 核心功能：
   - 关联项目：选择project_id，仅针对当前项目提交评审；
   - 代码编辑器：支持语法高亮、多行输入，输入待评审代码；
   - 提交评审：点击按钮调用/ai/review接口，加载中状态提示；
   - 结果展示：展示score（分数）、suggestion（优化建议）、improved_code（优化代码），优化代码支持复制；
   - 历史记录：展示当前项目的评审记录，可查看详情；
3. 接口调用：封装/api/ai/review下的所有接口，携带Token；
4. 仅生成代码评审页面+结果展示组件，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认code_ai_review表结构，重点核对code_content/text类型；
2. 复制后端提示词生成代码，验证提交评审接口返回模拟结果；
3. 复制前端提示词生成代码，集成代码编辑器；
4. 测试提交代码、展示结果、查询历史记录功能；
5. 修复联调问题，提交Git，模块5闭环完成。

---

# 模块6：自动化接口测试（api_test_case/api_test_report）—— 模块5闭环后执行
## 1. 表结构设计（非SQL）
### （1）api_test_case（测试用例表）
| 表名 | api_test_case（测试用例表） |
|------|------------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 用例唯一标识 | 主键（自增） | - |
| api_id | bigint(20) | 关联接口ID | 普通索引 | 关联api_info表id，不可为空 |
| case_name | varchar(100) | 用例名称 | 唯一索引 | 不可为空 |
| params | text | 测试参数（JSON） | 无 | 接口请求参数 |
| expected_result | text | 预期结果（JSON） | 无 | 接口预期返回值 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |

### （2）api_test_report（测试报告表）
| 表名 | api_test_report（测试报告表） |
|------|-------------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 报告唯一标识 | 主键（自增） | - |
| api_id | bigint(20) | 关联接口ID | 普通索引 | 关联api_info表id，不可为空 |
| case_id | bigint(20) | 关联用例ID | 普通索引 | 关联api_test_case表id，不可为空 |
| actual_result | text | 实际结果（JSON） | 无 | 接口实际返回值 |
| status | varchar(20) | 测试状态 | 普通索引 | 枚举：success（成功）/fail（失败） |
| test_time | datetime | 测试时间 | 无 | 默认CURRENT_TIMESTAMP |
| remark | varchar(500) | 失败备注 | 无 | 可为空 |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 6.1 | 表结构设计确认 | 明确两个表的字段、关联关系 | api_id/case_id关联正确 |
| 6.2.1 | 后端：创建TestCase/TestReport实体类 | 映射两个表的字段，加Swagger注解 | 字段与表设计完全一致 |
| 6.2.2 | 后端：实现Mapper层 | 支持按api_id查询用例/报告 | 可筛选指定接口的用例/报告 |
| 6.2.3 | 后端：实现Service层 | 封装用例CRUD、一键执行、生成报告逻辑 | 执行用例后自动生成报告，对比预期/实际结果 |
| 6.2.4 | 后端：实现Controller层 | 暴露用例CRUD、执行用例、查询报告接口 | 执行接口：POST /test/case/run/{case_id} |
| 6.3 | Swagger接口验证 | 测试用例CRUD、执行用例、查询报告接口 | 执行用例后生成报告，状态正确 |
| 6.4.1 | 前端：封装test API | 封装用例CRUD、执行用例、查询报告接口 | API参数与后端一致 |
| 6.4.2 | 前端：开发测试用例页面 | 关联接口，展示用例列表、新增/编辑/删除用例 | 用例与接口关联正确 |
| 6.4.3 | 前端：开发一键执行/报告展示页面 | 执行用例后展示结果，报告包含状态/预期/实际结果 | 报告与后端生成的一致 |
| 6.5.1 | 联调：环境检查 | 前端调用执行接口权限正确 | 无403/接口调用失败问题 |
| 6.5.2 | 联调：功能测试 | 用例CRUD、一键执行、报告生成/查看 | 执行用例后状态正确，报告内容完整 |
| 6.5.3 | 联调：问题修复 | 修复用例执行/报告对比/结果展示问题 | 功能无异常，对比逻辑正确 |
| 6.5.4 | 联调：提交Git | 标注模块6完成，代码提交 | 提交记录包含测试模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发api_test_case/api_test_report自动化接口测试模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.test；
2. 实体类：
   - TestCase：id(bigint)、api_id(bigint)、case_name(varchar100)、params(text)、expected_result(text)、create_time(datetime)；
   - TestReport：id(bigint)、api_id(bigint)、case_id(bigint)、actual_result(text)、status(varchar20)、test_time(datetime)、remark(varchar500)；
3. 实现核心接口：
   - 用例CRUD：POST/PUT/DELETE /test/case；
   - 执行用例：POST /test/case/run/{case_id}（执行后生成TestReport，对比expected_result和actual_result，更新status）；
   - 查询报告：GET /test/report/page（入参：pageNum/pageSize/api_id/case_id/status）；
4. status枚举：success/fail，接口返回统一Result格式，添加Swagger3注解；
5. 仅生成两个实体类+Mapper+Service+Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发api_test_case/api_test_report自动化接口测试页面，严格遵循以下要求：
1. 页面路径：src/views/test/index.vue；
2. 核心功能：
   - 关联接口：选择api_id，仅展示当前接口下的用例；
   - 用例管理：列表展示case_name/params/expected_result，支持新增/编辑/删除；
   - 一键执行：执行选中用例，展示执行状态，执行完成后生成报告；
   - 报告展示：列表展示case_id/status/test_time，点击查看详情（预期/实际结果对比）；
3. 接口调用：封装/api/test下的所有接口，携带Token；
4. 仅生成测试用例页面+报告展示组件，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认两个表的结构及关联关系；
2. 复制后端提示词生成代码，验证用例执行和报告生成接口；
3. 复制前端提示词生成代码，关联接口中心模块；
4. 测试用例CRUD、一键执行、报告查看功能；
5. 修复联调问题，提交Git，模块6闭环完成。

---

# 模块7：自动监控&告警（monitor）—— 模块6闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | monitor（监控表） |
|------|-------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 监控记录唯一标识 | 主键（自增） | - |
| project_id | bigint(20) | 关联项目ID | 普通索引 | 关联project表id，不可为空 |
| monitor_url | varchar(255) | 监控URL | 唯一索引 | 不可为空 |
| status | varchar(20) | 监控状态 | 普通索引 | 枚举：normal（正常）/exception（异常）/slow（缓慢） |
| response_time | int(10) | 响应时间（毫秒） | 无 | 默认0 |
| create_time | datetime | 创建时间 | 无 | 默认CURRENT_TIMESTAMP |
| update_time | datetime | 更新时间 | 无 | 默认CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 7.1 | 表结构设计确认 | 明确monitor表的字段、状态枚举、响应时间单位 | 响应时间单位为毫秒，status枚举正确 |
| 7.2.1 | 后端：创建Monitor实体类 | 映射表字段，加Swagger注解 | 字段与表设计完全一致 |
| 7.2.2 | 后端：实现Mapper层 | 支持按project_id/status查询，统计可用性 | 可按时间范围统计正常/异常次数 |
| 7.2.3 | 后端：实现Service层 | 封装CRUD、定时监控、状态更新、可用性统计逻辑 | 定时任务（每5分钟）检测URL，更新状态/响应时间 |
| 7.2.4 | 后端：实现Controller层 | 暴露CRUD、查询监控记录、统计可用性接口 | 可用性统计：GET /monitor/uptime/{project_id} |
| 7.3 | Swagger接口验证 | 测试CRUD、统计接口，验证定时任务 | 定时任务运行后状态/响应时间更新 |
| 7.4.1 | 前端：封装monitor API | 封装CRUD、查询记录、统计可用性接口 | API参数与后端一致 |
| 7.4.2 | 前端：开发监控大盘页面 | 项目状态卡片、响应时间趋势图、可用性统计 | 卡片状态与后端一致，趋势图实时更新 |
| 7.4.3 | 前端：开发监控配置页面 | 新增/编辑监控URL，设置响应时间阈值 | 阈值设置后，缓慢状态判定正确 |
| 7.5.1 | 联调：环境检查 | 定时任务正常运行，前端请求权限正确 | 无监控URL访问失败问题 |
| 7.5.2 | 联调：功能测试 | 监控配置、状态更新、可用性统计、趋势图展示 | 状态实时更新，可用性统计准确 |
| 7.5.3 | 联调：问题修复 | 修复定时任务/趋势图/状态判定问题 | 监控功能7×24小时运行，无漏检 |
| 7.5.4 | 联调：提交Git | 标注模块7完成，代码提交 | 提交记录包含监控模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发monitor自动监控&告警模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.monitor；
2. 实体类Monitor映射表结构：id(bigint)、project_id(bigint)、monitor_url(varchar255)、status(varchar20)、response_time(int10)、create_time(datetime)、update_time(datetime)；
3. 核心逻辑：
   - 定时任务：每5分钟检测monitor_url，更新response_time和status（normal/exception/slow，slow判定：响应时间>500ms）；
   - 可用性统计：GET /monitor/uptime/{project_id}（返回可用率=正常次数/总次数*100）；
4. 实现CRUD接口，所有接口返回统一Result格式，添加Swagger3注解；
5. 仅生成Entity→Mapper→Service（含定时任务）→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus + ECharts开发monitor自动监控&告警页面，严格遵循以下要求：
1. 页面路径：src/views/monitor/index.vue；
2. 核心功能：
   - 监控大盘：按project_id展示项目监控卡片（包含status/response_time）、响应时间折线图（近24小时）、可用性百分比；
   - 监控配置：新增/编辑monitor_url，设置slow阈值（默认500ms），支持删除监控；
   - 状态展示：normal（绿色）/exception（红色）/slow（黄色），实时刷新；
3. 接口调用：封装/api/monitor下的所有接口，携带Token，折线图每5分钟刷新一次；
4. 仅生成监控大盘+配置页面，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认monitor表结构，重点核对update_time自动更新；
2. 复制后端提示词生成代码，启动定时任务并验证URL检测；
3. 复制前端提示词生成代码，集成ECharts趋势图；
4. 测试监控配置、状态更新、可用性统计功能；
5. 修复联调问题，提交Git，模块7闭环完成。

---

# 模块8：部署记录（deploy_record）—— 模块7闭环后执行
## 1. 表结构设计（非SQL）
| 表名 | deploy_record（部署记录表） |
|------|-----------------------------|
| 字段名 | 字段类型 | 字段说明 | 主键/索引 | 补充说明 |
| id | bigint(20) | 部署记录唯一标识 | 主键（自增） | - |
| project_id | bigint(20) | 关联项目ID | 普通索引 | 关联project表id，不可为空 |
| version | varchar(50) | 部署版本 | 普通索引 | 如：v1.0.0，不可为空 |
| content | varchar(1000) | 部署内容 | 无 | 如：修复登录Bug，可为空 |
| env | varchar(20) | 部署环境 | 普通索引 | 枚举：dev（开发）/test（测试）/prod（生产） |
| status | varchar(20) | 部署状态 | 普通索引 | 枚举：success（成功）/fail（失败） |
| create_time | datetime | 部署时间 | 无 | 默认CURRENT_TIMESTAMP |

## 2. 子任务拆解（按闭环步骤）
| 子任务编号 | 子任务描述 | 核心目标 | 验证标准 |
|------------|------------|----------|----------|
| 8.1 | 表结构设计确认 | 明确deploy_record表的字段、环境/状态枚举 | env/status枚举值正确 |
| 8.2.1 | 后端：创建DeployRecord实体类 | 映射表字段，加Swagger注解 | 字段与表设计完全一致 |
| 8.2.2 | 后端：实现Mapper层 | 支持按project_id/env/status/version查询 | 可筛选指定项目/环境的部署记录 |
| 8.2.3 | 后端：实现Service层 | 封装CRUD、分页查询逻辑 | 分页参数生效，查询精准 |
| 8.2.4 | 后端：实现Controller层 | 暴露CRUD、分页查询、查看详情接口 | 详情接口：GET /deploy/{id} |
| 8.3 | Swagger接口验证 | 测试所有接口，重点验证分页/条件查询 | 按环境/状态筛选结果正确 |
| 8.4.1 | 前端：封装deploy API | 封装CRUD、分页查询、查看详情接口 | API参数与后端一致 |
| 8.4.2 | 前端：开发部署记录页面 | 列表展示版本/环境/状态/部署时间，支持查询 | 列表列与表字段匹配，查询生效 |
| 8.4.3 | 前端：开发新增/详情弹窗 | 新增表单包含版本/内容/环境，详情展示全字段 | 新增后列表刷新，详情展示完整 |
| 8.5.1 | 联调：环境检查 | 前端API调用路径正确，Token正常 | 无401/403错误 |
| 8.5.2 | 联调：功能测试 | 新增/编辑/删除/分页/查询/查看详情功能验证 | 所有操作同步到数据库，无数据丢失 |
| 8.5.3 | 联调：问题修复 | 修复表单校验/查询筛选/详情展示问题 | 功能无异常，交互流畅 |
| 8.5.4 | 联调：提交Git | 标注模块8完成，代码提交 | 提交记录包含部署模块全量变更 |

## 3. 精准提示词
### 后端提示词（Vibecoding）
```
基于SpringBoot3 + MyBatis-Plus开发deploy_record部署记录模块，严格遵循以下要求：
1. 包路径：com.ai.dev.platform.modules.deploy；
2. 实体类DeployRecord映射表结构：id(bigint)、project_id(bigint)、version(varchar50)、content(varchar1000)、env(varchar20)、status(varchar20)、create_time(datetime)；
3. 实现核心接口：
   - CRUD：POST/PUT/DELETE /deploy；
   - 分页查询：GET /deploy/page（入参：pageNum/pageSize/project_id/env/status/version）；
   - 详情：GET /deploy/{id}；
4. env枚举：dev/test/prod，status枚举：success/fail，接口返回统一Result格式；
5. 添加Swagger3注解，仅生成Entity→Mapper→Service→Controller，无多余代码，无需SQL语句。
```
### 前端提示词（Vibecoding）
```
基于Vue3 + Element Plus开发deploy_record部署记录页面，严格遵循以下要求：
1. 页面路径：src/views/deploy/index.vue；
2. 核心功能：
   - 部署记录列表：表格列包含version/env/status/content/create_time，支持分页、按project_id/env/status/version查询；
   - 新增部署记录：弹窗表单，包含version（必填）、content、env（下拉：dev/test/prod，必填）、status（下拉：success/fail，必填）；
   - 查看详情：弹窗展示部署记录的所有字段；
3. 接口调用：封装/api/deploy下的所有接口，携带Token；
4. 仅生成部署记录页面+新增/详情弹窗，无多余代码。
```

## 4. 闭环执行步骤（极简可落地）
1. 确认deploy_record表结构，重点核对env/status枚举；
2. 复制后端提示词生成代码，验证分页/条件查询接口；
3. 复制前端提示词生成代码，关联项目模块；
4. 测试部署记录CRUD、分页、查询、详情功能；
5. 修复联调问题，提交Git，模块8闭环完成。

---

### 核心总结（精准落地关键）
1. **表设计核心**：所有表以`id`为自增主键，关联字段用「表名_id」，时间字段统一`datetime`，状态字段用明确枚举；
2. **子任务拆解核心**：每个模块拆分为「表设计→后端→Swagger验证→前端→联调」，每步有明确验证标准；
3. **提示词核心**：精准指定包路径、字段映射、接口路径、枚举值，仅要求生成核心代码，无多余内容；
4. **闭环核心**：完成一个模块的全流程（后端→前端→联调→Git），再启动下一个，避免接口/数据不一致。

按这套表设计、子任务、提示词和步骤落地，能完全契合「Vibecoding最高效闭环开发法」，全程无返工、无冗余，精准落地「AI全自动研发大脑」的所有模块。